{{breadcrums (__ 'Home') (__ title)}}

<div class="app-content center-layout mt-2 mx-md-3 px-1">
	<div class="content-wrapper">
	<div class="row">
	<div class="col-md-12">
	<div class="card">
	<div class="card-content collpase show">
	<div class="card-body">
		<script>
			$(document).ready(function(){
				$('.beforedate').each(function(){
				$(this).data("DateTimePicker").maxDate(new Date());
				});
				$('.afterdate').each(function(){
				$(this).data("DateTimePicker").minDate(new Date());
				});
				$('.today').each(function(){
				$(this).data("DateTimePicker").minDate(new Date());
				$(this).data("DateTimePicker").maxDate(new Date());
				});
			});
		</script>
		<form method="POST" id="formID" action="/rule/addrule"  class="needs-validation form form-horizontal" novalidate enctype="multipart/form-data">
		{{#each data}}
		<p class="form-section text-bold-600 font-medium-2"><i class="ft-user font-medium-2 mr-1"></i>{{#with ..}}{{__ "Rule Information" setlang}}{{/with}}</p>
			<div class="form-body user_form">
			<div class="row">
			<div class="col-md-6">
			<div class="form-group input">
				<div class="">
					<ul class="list-inline mb-0">
					<li class="col-md-12 p-0 form-control" id="export">
						<input type="hidden" id="userinput1" name="id" {{#if this._id}} maxlength="25" value="{{this._id}}"{{/if}}>
					    <label class="ml-1 custom-top-label top" style="z-index:9">{{#with ..}}{{__ "Loan Type" setlang}}{{/with}}<span class="red">*</span></label>
						<select class="select2 form-control export" data-validation-required-message="{{#with ..}}{{__ "Loan Type is required"}}{{/with}}" name="loantype">
							<option value="">{{#with ..}}{{__ "Loan Type" setlang}}{{/with}}</option>
							<option value="Personal Loan" {{#ifCond this.loantype '==' 'Personal Loan'}} selected {{/ifCond}}>{{#with ..}}{{__ "Personal Loan" setlang}}{{/with}}</option>
							<option value="Short Term Loan" {{#ifCond this.loantype '==' 'Short Term Loan'}} selected {{/ifCond}}>{{#with ..}}{{__ "Short Term Loan" setlang}}{{/with}}</option>
							<option value="Home Loan"{{#ifCond this.loantype '==' 'Home Loan'}} selected {{/ifCond}}>{{#with ..}}{{__ "Home Loan" setlang}}{{/with}}</option>
							<option value="Car Loan"{{#ifCond this.loantype '==' 'Car Loan'}} selected {{/ifCond}}>{{#with ..}}{{__ "Car Loan" setlang}}{{/with}}</option>
							<option value="Two Wheeler Loan"{{#ifCond this.loantype '==' 'Two Wheeler Loan'}} selected {{/ifCond}}>{{#with ..}}{{__ "Two Wheeler Loan" setlang}}{{/with}}</option>
							<option value="Used car Loan"{{#ifCond this.loantype '==' 'Used car Loan'}} selected {{/ifCond}}>{{#with ..}}{{__ "Used Car Loan" setlang}}{{/with}}</option>
							<option value="Education Loan"{{#ifCond this.loantype '==' 'Education Loan'}} selected {{/ifCond}}>{{#with ..}}{{__ "Education Loan" setlang}}{{/with}}</option>
							<option value="Business Loan"{{#ifCond this.loantype '==' 'Business Loan'}} selected {{/ifCond}}>{{#with ..}}{{__ "Business Loan" setlang}}{{/with}}</option>
						</select>
					</li>
					</ul>
				</div><div class="help-block"></div>
			</div>
			</div>
			<div class="col-md-6">
			<div class="form-group input">
				<div class="">
					<ul class="list-inline mb-0">
					<li class="col-md-12 p-0 form-control" id="export">
					    <label class="ml-1 custom-top-label top" style="z-index:9">{{#with ..}}{{__ "Applicable for amount" setlang}}{{/with}}<span class="red">*</span></label>
						<select class="select2 form-control export" data-validation-required-message="{{#with ..}}{{__ "Applicable for amount is required"}}{{/with}}" name="loan_amount_rule">
							<option value="">{{#with ..}}{{__ "Applicable for amount" setlang}}{{/with}}</option>
							<option value="Less Than 50,000" {{#ifCond this.loan_amount_rule '==' 'Less Than 50,000'}} selected {{/ifCond}}>{{#with ..}}{{__ "Less Than 50,000" setlang}}{{/with}}</option>
						
						<option value="1,00,000 - 3,00,000" {{#ifCond this.loan_amount_rule '==' '1,00,000 - 3,00,000'}} selected {{/ifCond}}>{{#with ..}}{{__ "1,00,000 - 3,00,000" setlang}}{{/with}}</option>
						
						<option value="3,00,000 - 6,00,000" {{#ifCond this.loan_amount_rule '==' '3,00,000 - 6,00,000'}} selected {{/ifCond}}>{{#with ..}}{{__ "3,00,000 - 6,00,000" setlang}}{{/with}}</option>
						
						<option value="6,00,000 - 9,00,000" {{#ifCond this.loan_amount_rule '==' '6,00,000 - 9,00,000'}} selected {{/ifCond}}>{{#with ..}}{{__ "6,00,000 - 9,00,000" setlang}}{{/with}}</option>
						
						<option value="1,00,00,000 Above"{{#ifCond this.loan_amount_rule '==' 'More Than 1,00,00,000'}} selected {{/ifCond}}>{{#with ..}}{{__ "More Than 1,00,00,000" setlang}}{{/with}}</option>
						</select>
					</li>
					</ul>	
				</div><div class="help-block"></div>
			</div>
			</div>		
			<div class="col-md-6">
			<div class="form-group input">
			<div class="col-md-12 form-control border-light">
				<!--<input type="hidden" id="userinput1"name="id" {{#if this._id}} value="{{this._id}}"{{/if}} >-->
				<input type="text" id="userinput1"  data-validation-regex-regex="([A-Za-z_, `.'^-]{1,50})" data-validation-regex-message="{{#with ..}}{{__ "Only Characters, no numbers"}}{{/with}}" data-validation-required-message="{{#with ..}}{{__ "Rule Title is required"}}{{/with}}" name="rule_title" {{#if this.rule_title}} value="{{this.rule_title}}"{{/if}} >
				<label for="userinput1">{{#with ..}}{{__ "Rule Title" setlang}}{{/with}}<span class="required red">*</span></label>
			</div><div class="help-block"></div>
			</div>
			</div>
			<div class="col-md-6">	
			<div class="form-group input">
			<div class="col-md-12 form-control border-light" style="border: 1px solid #ddd;">
			<div class="form-field">	

			<textarea name="rule_desc"  data-validation-regex-regex="([A-Za-z0-9_,` .'^-]{1,150})" data-validation-regex-message="{{#with ..}}{{__ "Only Characters, no numbers"}}{{/with}}" data-validation-required-message="{{#with ..}}{{__ "Description is required"}}{{/with}}" {{#if this.rule_desc}} value="{{this.rule_desc}}"{{/if}}>{{this.rule_desc}}</textarea>
				<span class="txt-title-label"></span> 
				<label class="text-area address ">{{#with ..}}{{__ "Description" setlang}}{{/with}}<span class="required red">*</span></label>
			</div>
			</div><div class="help-block"></div>
			</div>
			</div>
			
			 
<div class="col-md-6">
  <div class="form-group row">
    <div class="col-md-12">
      <label class="custom-control-label-date ml-2">{{#with ..}}{{__ "Document For Rule" setlang}}{{/with}}</label>
      <input class="form-control border-light imageUpload" onchange="return ValidateExtension()" name="rule_image" {{#if this.rule_image}} value="{{this.rule_image}}" {{/if}} type="file" id="userinput5">
      <span class="required red notice"></span>
      {{#if this.rule_image}}
        <img class="existing_user_image update_time_team_image" src="/images/upload/{{this.rule_image}}" alt="Rule Image">
        <a href="/images/upload/{{this.rule_image}}" download="rule_image" target="_blank">"{{#with ..}}{{__ "Download Image"}}{{/with}}"</a>
        <input class="form-control border-light" name="rule_photo_old" value="{{this.rule_image}}" type="hidden" placeholder="" id="userinput5">
      {{/if}}
    </div>
    <div class="help-block"></div>
  </div>
</div>		
			
			{{!-- //// --}}
						{{!-- <div class="col-md-5 add_element">
			{{#if this.rule_image }}
				{{#each this.rule_image}}
			<div class="col-md-12 p-0">
				<div class="form-group">
					<label class="custom-control-label-date ml-2">{{#with ..}}{{__ "Document For Rule" setlang}}{{/with}}<span class="required red">*</span></label>
					<input class="form-control border-light  imageUpload docfile" id="imageUpload" name="rule_image" {{#if this}} value="{{this}}" {{else}} data-validation-required-message="Document is required" {{/if}} type="file" multiple> 
					<span class="required red notice"></span>
					{{#if this}}
					<p>{{this}}</p> 
					<input class="form-control border-light imageUpload rule_photo_old" name="rule_photo_old"  value="{{this}}" type="hidden"  placeholder="" id="userinput5" >
					{{/if}}
				</div>
				<div class="help-block"></div>
			</div>
			{{/each}}
			{{else}}
				{{addimage 'nodata'}}
			{{/if}}
			</div>
			<div class="col-md-1 p-0">
			<button type="button" id="add_doc" class="btn shover" style="background-color:#6badc2;color:#fff">
				<i class="icon-plus4"></i>Add more
            </button>
			</div> --}}
			{{!-- ///// --}}
			</div>
			{{/each}}

<!-- Custome fields Start--> 
{{#if newfield}}
<p class="form-section text-bold-600 font-medium-2 border-light"><i class="fa fa-address-card-o" aria-hidden="true"></i>
	{{__ "Custom fields"}} </p>
<div class="row">

	{{#each newfield as |datafield|}}
	{{#ifCond datafield.field_type "==" "text"}}
	<div class="col-md-6 notCustomerBlock">
		<div class="form-group input">
			<div class="col-md-12 form-control border-light">
				<input type="text" name="customfields[{{datafield._id}}]" {{#ifEqual datafield.validation "nullable"
					}}{{/ifEqual}} {{#ifEqual datafield.validation "required" }}
					data-validation-required-message="{{datafield.label}} is required" {{/ifEqual}} {{#ifEqual
					datafield.validation "numeric" }} data-validation-regex-regex="([0-9_, .-]{{regexlimit}})"
					{{/ifEqual}} {{#ifEqual datafield.validation "alpha" }}
					data-validation-regex-regex="([A-Za-z_, .-]{{regexlimit}})" {{/ifEqual}} {{#ifEqual
					datafield.validation "alpha_space" }}
					data-validation-regex-message="{{__ 'Only Characters, no numbers'}}"
					data-validation-regex-regex="([A-Za-z_, .-]{{regexlimit}})" {{/ifEqual}} {{#ifEqual
					datafield.validation "alpha_num" }} data-validation-regex-regex="([A-Za-z0-9_, .-]{{regexlimit}})"
					{{/ifEqual}} {{#ifEqual datafield.validation "email" }}
					data-validation-regex-regex="([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})" {{/ifEqual}} {{#ifEqual
					datafield.validation "url" }}
					data-validation-regex-regex="^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_-]+(\.[a-zA-Z]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)?$"
					{{/ifEqual}} {{#ifEqual datafield.validation "before_or_equal:today" }} {{/ifEqual}} {{#ifEqual
					datafield.validation "date_equals:today" }} {{/ifEqual}} {{#ifEqual
					datafield.validation "after_or_equal:today" }} {{/ifEqual}} {{#if datafield.minival}}
					minlength={{datafield.minival}} {{/if}} {{#if datafield.maxival}}
					maxlength={{datafield.maxival}}{{/if}} {{#each ../customfield_value as |custome_value| }} {{#ifCond
					custome_value.id_d "==" datafield.id_d}} value="{{custome_value.customfield_value}}" {{/ifCond}}
					{{/each}}>
				<label>{{datafield.label}}{{#ifEqual datafield.validation "required"}}<span
						class="required red">*</span>{{/ifEqual}}</label>
			</div>
			<div class="help-block"></div>
		</div>
	</div>
	{{/ifCond}}
	{{#ifCond datafield.field_type "==" "textarea"}}
	<div class="col-md-6">
		<div class="form-group input">
			<div class="col-md-12 form-control border-light textarea_css" style="border: 1px solid #ddd;">
				<div class="form-field">
					<textarea name="customfields[{{datafield._id}}]" {{#ifEqual datafield.validation "nullable"
						}}{{/ifEqual}} {{#ifEqual datafield.validation "required" }}
						data-validation-required-message="{{datafield.label}} is required" {{/ifEqual}} {{#ifEqual
						datafield.validation "numeric" }} data-validation-regex-regex="([0-9_, .-]{{regexlimit}})"
						{{/ifEqual}} {{#ifEqual datafield.validation "alpha" }}
						data-validation-regex-regex="([A-Za-z_, .-]{{regexlimit}})" {{/ifEqual}} {{#ifEqual
						datafield.validation "alpha_space" }}
						data-validation-regex-message="{{__ 'Only Characters, no numbers'}}"
						data-validation-regex-regex="([A-Za-z_, .-]{{regexlimit}})" {{/ifEqual}} {{#ifEqual
						datafield.validation "alpha_num" }}
						data-validation-regex-regex="([A-Za-z0-9_, .-]{{regexlimit}})" {{/ifEqual}} {{#ifEqual
						datafield.validation "email" }}
						data-validation-regex-regex="([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})" {{/ifEqual}}
						{{#ifEqual datafield.validation "url" }}
						data-validation-regex-regex="^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_-]+(\.[a-zA-Z]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)?$"
						{{/ifEqual}} {{#ifEqual datafield.validation "before_or_equal:today" }} {{/ifEqual}} {{#ifEqual
						datafield.validation "date_equals:today" }} {{/ifEqual}} {{#ifEqual
						datafield.validation "after_or_equal:today" }} {{/ifEqual}} {{#if datafield.minival}}
						minlength={{datafield.minival}} {{/if}} {{#if datafield.maxival}}
						maxlength={{datafield.maxival}}{{/if}} {{#each ../customfield_value as |custome_value| }}
						{{#ifCond custome_value.id_d "==" datafield.id_d}} value="{{custome_value.customfield_value}}"
						{{/ifCond}}
						{{/each}}>{{#each ../customfield_value as |custome_value| }}{{#ifCond  custome_value.id_d "=="datafield.id_d}}{{custome_value.customfield_value}}{{/ifCond}}{{/each}}</textarea>
					<span class="txt-title-label"></span>
					<label class="text-area address ">{{datafield.label}}{{#ifEqual datafield.validation
						"required"}}<span class="required red">*</span>{{/ifEqual}}</label>
				</div>
			</div>
			<div class="help-block"></div>
		</div>
	</div>
	{{/ifCond}}
	{{#ifCond datafield.field_type "==" "checkbox"}}
	<div class="col-md-6">
		<div class="form-group">
			<div class="col-md-12 form-control">
				<div class="skin skin-flat row">
					<div class="input-group">
						<label class="ml-1 custom-top-label">{{datafield.label}}{{#ifEqual datafield.validation
							"required"}}<span class="required red">*</span>{{/ifEqual}}</label>
						{{#each datafield.c_label as |datafile_data|}}
						<div class="d-inline-block custom-control custom-checkbox mr-1">
							<input type="checkbox" class="custom-control-input hideattar"
								name="customfields[{{datafield._id}}]" value="{{this}}" {{#ifEqual
								datafield.validation "nullable" }}{{/ifEqual}} {{#ifEqual
								datafield.validation "required" }}
								data-validation-required-message="{{datafield.label}} is required" {{/ifEqual}} {{#each
								../../customfield_value as |custome_value| }} {{#ifCond custome_value.id_d "=="
								datafield.id_d}} {{#ifCond datafile_data "==" custome_value.customfield_value}} checked
								{{/ifCond}} {{/ifCond}} {{/each}}>
							<label class="custom-control-label" for="colorCheck1">{{this}}</label>
						</div>
						{{/each}}

					</div>

				</div>
			</div>
			<div class="help-block"></div>
		</div>
	</div>
	{{/ifCond}}
	{{#ifCond datafield.field_type "==" "dropdown"}}
	<div class="col-md-6">
		<div class="form-group input">
			<div class="heading-elements ">
				<ul class="list-inline mb-0">
					<li class="col-md-12 p-0 form-control" id="export">
						<label class="ml-1 custom-top-label top" style="z-index:9">{{datafield.label}}{{#ifEqual
							datafield.validation "required"}}<span class="required red">*</span>{{/ifEqual}}</label>
						<select class="select2 form-control export" name="customfields[{{datafield._id}}]" {{#ifEqual
							datafield.validation "nullable" }}{{/ifEqual}} {{#ifEqual datafield.validation "required" }}
							data-validation-required-message="{{datafield.label}} is required" {{/ifEqual}} {{#each
							../customfield_value as |custome_value| }} {{#ifCond custome_value.id_d "=="
							datafield.id_d}} value="{{custome_value.customfield_value}}" {{/ifCond}} {{/each}}>
							<option value="">Select {{datafield.label}}</option>
							{{#each datafield.d_label as |datafile_data|}}
							<option value="{{this}}" {{#each ../../customfield_value as |custome_value| }} {{#ifCond
								custome_value.id_d "==" datafield.id_d}} {{#ifCond datafile_data "=="
								custome_value.customfield_value}} selected {{/ifCond}} {{/ifCond}} {{/each}}>{{this}}
							</option>
							{{/each}}
						</select>
					</li>
				</ul>
			</div>
			<div class="help-block"></div>
		</div>
	</div>
	{{/ifCond}}
	{{#ifCond datafield.field_type "==" "date"}}


	<div class="col-md-6">
		<div class="form-group row">
			<div class="col-md-12">
				<label class="custom-control-label-date ml-2">
					{{datafield.label}}{{#ifEqual datafield.validation "required"}}<span
						class="required red">*</span>{{/ifEqual}}
				</label>

				<input type="text" name="customfields[{{datafield._id}}]" aria-invalid="false"
					class="form-control dateformat {{#ifEqual datafield.validation "
					before_or_equal:today"}}beforedate{{/ifEqual}} {{#ifEqual
					datafield.validation "after_or_equal:today" }}afterdate{{/ifEqual}} {{#ifEqual
					datafield.validation "date_equals:today" }}today{{/ifEqual}}" {{#ifEqual
					datafield.validation "required" }}
					data-validation-required-message="{{datafield.label}} is required" {{/ifEqual}} {{#each
					../customfield_value as |custome_value|}} {{#ifCond custome_value.id_d "==" datafield.id_d}}
					value="{{custome_value.customfield_value}}" {{/ifCond}} {{/each}}>

				<i class="ft-calendar icon-care"></i>
			</div>
			<div class="help-block"></div>
		</div>
	</div>
	{{/ifCond}}
	{{#ifCond datafield.field_type "==" "radio"}}
	<div class="col-md-6">
		<div class="form-group">
			<div class="col-md-12 form-control">
				<div class="skin skin-flat row ">
					<div class="input-group">
						<label class="custom-control-label custom-top-label ml-2">{{datafield.label}}{{#ifEqual
							datafield.validation "required"}}<span class="required red">*</span>{{/ifEqual}}</label>
						&nbsp;&nbsp;&nbsp;
						{{#each datafield.r_label as |datafile_data|}}
						<div class="d-inline-block custom-control custom-radio mr-1">
							<input type="radio" name="customfields[{{datafield._id}}]" value="{{datafile_data}}"
								{{#ifEqual datafield.validation "nullable" }}{{/ifEqual}} {{#ifEqual
								datafield.validation "required" }}
								data-validation-required-message="{{datafield.label}} is required" {{/ifEqual}} {{log
								datafile_data}} {{log "hbsssssssssssss" }} {{#each ../../customfield_value as
								|custome_value| }} {{#ifCond custome_value.id_d "==" datafield.id_d}} {{#ifCond
								datafile_data "==" custome_value.customfield_value}} checked {{/ifCond}} {{/ifCond}}
								{{/each}}>
							<label class="custom-control-label">{{this}}</label>
							&nbsp; &nbsp;&nbsp; &nbsp;
							&nbsp; &nbsp;&nbsp; &nbsp;
						</div>
						{{/each}}

					</div>
				</div>
			</div>
			<div class="help-block"></div>
		</div>
	</div>
	{{/ifCond}}
	{{#ifCond datafield.field_type "==" "file"}}
	<div class="col-md-6">
		<div class="form-group row">
			<div class="col-md-12">
				<label class="custom-control-label-date ml-2">{{datafield.label}}{{#ifEqual datafield.validation
					"required"}}{{#unless ../customfield_value}}{{else}}<span
						class="required red">*</span>{{/unless}}{{/ifEqual}}</label>
				<input class="form-control border-light validimage" {{#ifEqual datafield.validation "required" }}
					{{#unless ../customfield_value}} data-validation-required-message="{{datafield.label}} is required"
					{{/unless}} {{/ifEqual}} {{#each ../customfield_value as |custome_value| }} {{#ifCond
					custome_value.id_d "==" datafield.id_d}} value="{{custome_value.customfield_value}}" {{/ifCond}}
					{{/each}} name="{{datafield._id}}" type="file">

				{{#each ../customfield_value as |custome_value| }}
				{{#ifCond custome_value.id_d "==" datafield.id_d}}
				<p>{{custome_value.customfield_value}}</p>
				<input class="form-control border-light edit_val" name="customphoto_old"
					value="{{custome_value.customfield_value}}" type="hidden" placeholder="" id="userinput5">
				{{/ifCond}}
				{{/each}}

				<span class="required red notice"></span>
			</div>
			<div class="help-block"></div>
		</div>
	</div>
	{{/ifCond}}
	{{/each}}
</div>
{{/if}}

<!-- Custome fields End-->  
		<div class="form-actions left">
				<button type="submit" class="btn btn-secondary" onclick="return ValidateExtension()">
					<i class="fa fa-check-square-o"></i> {{__ "Submit"}}
				</button>
				<button type="reset" class="btn btn-warning mr-1 btn-outline-light text-muted">
					<i class="ft-refresh-cw"></i> {{__ "Reset"}}
				</button>
			</div>
		</div>
		</form>
	</div>
	</div>
	</div>
    </div>
</div>
</div>
</div> 
{{#each setting as |geninfom|}}
<script type="text/javascript">
        function ValidateExtension(){
		alert("123");
		m=0;
		$('.fileUpload').each(function(){
			if($(this).val() != '') {
				var imageUpload=$(this).val();
				var allowedFiles = [];
				var jpeg="{{geninfom.imgtype_jpeg}}";
				var jpg="{{geninfom.imgtype_jpg}}";
				var png="{{geninfom.imgtype_png}}";
				if(jpeg!=''){
					allowedFiles.push('{{geninfom.imgtype_jpeg}}');
				}
				if(jpg!=''){
					allowedFiles.push('{{geninfom.imgtype_jpg}}');
				}
				if(png!=''){
					allowedFiles.push('{{geninfom.imgtype_png}}');
				}
				var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(" + allowedFiles.join('|') + ")$");
				if (!regex.test(imageUpload.toLowerCase())) {
						alert("Only " + allowedFiles.join(', ') + " formats are allowed.");
					m++;
					$('.imageUpload').val("");
				}
				else{
					$(this).siblings('.notice').html("");
				}
				$('.imageUpload').on('change', function () {

					var size = (this.files[0].size / 1024 / 1024).toFixed(2);
					var limit = "{{geninfom.imgupload_size}}";
					if (size > limit) {
						alert("Too large file Size. Only file smaller than {{geninfom.imgupload_size}}MB can be uploaded.");
						$('.imageUpload').val("");
					}

				});
			}
		});
			if(m>0){
			return false;
			}
        }
</script>
{{/each}}
<script>
function deleteParentElement(n){
	$("#addeddiv").remove();
}
function deleteaddedimage(n){
	$("#addedimage").remove();
}
function deleteaddednote(n){
	$("#addednote").remove();
}
function deleteattachfile(n){
	$("#attachfile").remove();
}
</script>
<script>
$(document).ready(function(){
	$("body").on("click", "#add_doc", function (e) {
		$('.add_element').append('{{addimage "data"}}');
	});
	
	$( ".docfile" ).each(function() {
		$(this).on("click", function(){
			$(this).siblings(".doc_old_in").remove();
		});
	});
	
});
</script>
{{#each newfield as |customvalid|}}
<script type="text/javascript">
       $('document').ready(function(){
		m=0;
		$('.validimage').on('blur', function(){
			if($(this).val() != '') {
				var imageUpload=$(this).val();
				var allowedFiles = [];
				var image="{{customvalid.filetype}}";
				 var res = image.split(",");
				allowedFiles=res;
				var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(" + allowedFiles.join('|') + ")$");
				if (!regex.test(imageUpload.toLowerCase())) {
					m++;
					alert("Only {{customvalid.filetype}} formats are allowed.");				}
				else{
					$(this).siblings('.notice').html("");
				}
			}
		});
		$('.validimage').on('change', function() {
		if("{{customvalid.field_type}}" == "file"){
			var size = (this.files[0].size/1024/1024).toFixed(2);
			var limit="{{customvalid.filesize}}";
			if(size > limit){
				alert("Too large file Size. Only file smaller than {{customvalid.filesize}}MB can be uploaded.");
				$('.validimage').val("");
			}
		}
		});
			if(m>0){
			return false;
			}
        });
</script>
{{/each}}